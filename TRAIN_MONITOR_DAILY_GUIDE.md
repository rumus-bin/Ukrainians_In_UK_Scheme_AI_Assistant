# –©–æ–¥–µ–Ω–Ω–∏–π –ú–æ–Ω—ñ—Ç–æ—Ä –ü–æ—ó–∑–¥—ñ–≤ - –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è

**Train Monitor - Daily Scheduler | –©–æ–¥–µ–Ω–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑–∫–ª–∞–¥—É –ø–æ—ó–∑–¥—ñ–≤**

---

## –©–æ —Ü–µ?

–©–æ–¥–µ–Ω–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä –ø–æ—ó–∑–¥—ñ–≤ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ä–æ–∑–∫–ª–∞–¥ **–æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –¥–µ–Ω—å –æ 7:00 —Ä–∞–Ω–∫—É** —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é –¥–æ Telegram –≥—Ä—É–ø–∏ –ø—Ä–æ –≤—Å—ñ –≤–∏—è–≤–ª–µ–Ω—ñ –∑–∞—Ç—Ä–∏–º–∫–∏, —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è —Ç–∞ –∑–º—ñ–Ω–∏.

### –ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

‚úÖ **–û–¥–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –¥–µ–Ω—å** - –Ω–µ "–±–æ–º–±–∏—Ç—å" API –∑–∞–ø–∏—Ç–∞–º–∏
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –æ 7:00** - –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è
‚úÖ **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é** - –∑—Ä–æ–∑—É–º—ñ–ª–æ –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚úÖ **–†–µ–∂–∏–º —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–µ–∑ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
‚úÖ **–†—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫** - –¥–ª—è –Ω–µ–≥–∞–π–Ω–æ—ó –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –±–µ–∑ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è

---

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤–∂–µ –≥–æ—Ç–æ–≤–∞

–í–∞—à `.env` —Ñ–∞–π–ª –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –∑:
```bash
TRAIN_MONITOR_ENABLED=true
TRAIN_MONITOR_DRY_RUN=true  # –†–µ–∂–∏–º —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
DARWIN_API_KEY=60073c87-0cfb-482c-8ac3-d6712b066502
TRAIN_MONITOR_STATIONS=ELY
TRAIN_MONITOR_CHECK_TIME=07:00
```

### 2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è (—Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫)

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ä–æ–±–æ—Ç—É —Å–∏—Å—Ç–µ–º–∏ **–ø—Ä—è–º–æ –∑–∞—Ä–∞–∑** –±–µ–∑ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –Ω–∞ 7:00:

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –ù–ï–ì–ê–ô–ù–û (–±–µ–∑ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –≤ Telegram)
docker compose exec bot python -m src.train_monitor.daily_monitor --check-now --dry-run

# –ê–±–æ –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏ (–æ–±–µ—Ä–µ–∂–Ω–æ!)
docker compose exec bot python -m src.train_monitor.daily_monitor --check-now
```

**–©–æ –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è:**
- ‚úÖ –ù–µ–≥–∞–π–Ω–∏–π –∑–∞–ø–∏—Ç –¥–æ Darwin API
- ‚úÖ –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–æ –ø–æ—ó–∑–¥–∏ –∑—ñ —Å—Ç–∞–Ω—Ü—ñ—ó Ely
- ‚úÖ –í–∏—è–≤–ª–µ–Ω–Ω—è –∑–∞—Ç—Ä–∏–º–æ–∫/—Å–∫–∞—Å—É–≤–∞–Ω—å
- ‚úÖ –õ–æ–≥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é (—è–∫—â–æ --dry-run)
- ‚úÖ –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –≤ Telegram (—è–∫—â–æ –±–µ–∑ --dry-run)

### 3. –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è, –∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤—ñ—Å –¥–ª—è —â–æ–¥–µ–Ω–Ω–∏—Ö –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å –∑ –Ω–æ–≤–æ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é
docker compose restart train-monitor

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
docker compose logs -f train-monitor
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:**
```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë           üöÇ UK TRAIN MONITOR - DAILY SCHEDULER üöÇ                   ‚ïë
‚ïë  –©–æ–¥–µ–Ω–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–∑–∫–ª–∞–¥—É –ø–æ—ó–∑–¥—ñ–≤                                  ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

Daily Train Monitor starting...
Check Time: 07:00
DRY-RUN Mode: True
‚úÖ Scheduler started
üìÖ Next check scheduled for: 07:00 daily
‚úÖ DAILY MONITOR ACTIVE
```

---

## –†–µ–∂–∏–º–∏ —Ä–æ–±–æ—Ç–∏

### –†–µ–∂–∏–º 1: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è (DRY-RUN)

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–±–æ—Ç–∏ –±–µ–∑ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

```bash
# –†—É—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä—è–º–æ –∑–∞—Ä–∞–∑
docker compose exec bot python -m src.train_monitor.daily_monitor --check-now --dry-run
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—É—é—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é
- Telegram –Ω–µ –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –ë–µ–∑–ø–µ—á–Ω–æ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

**–ü—Ä–∏–∫–ª–∞–¥ –ª–æ–≥—É:**
```
Checking station: Ely (ELY)
Found 5 service(s)
Detected 2 change(s):
  - DELAY: Train to London Kings Cross delayed by 12 minutes
  - CANCELLATION: Train to Cambridge cancelled

[DRY-RUN] Would send to Telegram:

üì¢ –©–æ–¥–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç –ø—Ä–æ —Ä—É—Ö –ø–æ—ó–∑–¥—ñ–≤

üìç –°—Ç–∞–Ω—Ü—ñ—è: Ely
üïê –ß–∞—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏: 23:15, 28.12.2025

üìä –í–∏—è–≤–ª–µ–Ω–æ –∑–º—ñ–Ω: 2
  ‚è±Ô∏è –ó–∞—Ç—Ä–∏–º–∫–∏: 1
  ‚ùå –°–∫–∞—Å—É–≤–∞–Ω–Ω—è: 1
```

### –†–µ–∂–∏–º 2: –ü—Ä–æ–¥–∞–∫—à–Ω (–†–µ–∞–ª—å–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –î–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —É Telegram

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `.env`:**
```bash
TRAIN_MONITOR_DRY_RUN=false  # –í–∏–º–∫–Ω—É—Ç–∏ DRY-RUN
TRAIN_MONITOR_ELY_CHAT_ID=your_real_chat_id  # –í–∞—à chat ID
```

**–ó–∞–ø—É—Å–∫:**
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑ –Ω–æ–≤–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏
docker compose restart train-monitor

# –ê–±–æ —Ä—É—á–Ω–∏–π –∑–∞–ø—É—Å–∫ –¥–ª—è —Ç–µ—Å—Ç—É
docker compose exec bot python -m src.train_monitor.daily_monitor --check-now
```

### –†–µ–∂–∏–º 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —â–æ–¥–µ–Ω–Ω–∏–π

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —â–æ–¥–Ω—è –æ 7:00

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
```bash
# –í docker-compose.yml –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:
command: python -m src.train_monitor.daily_monitor --time 07:00
```

**–ó–∞–ø—É—Å–∫:**
```bash
docker compose up -d train-monitor
```

–°–µ—Ä–≤—ñ—Å –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è —â–æ–¥–Ω—è –æ 7:00 —Ç–∞ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ –∑–≤—ñ—Ç.

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### –Ø–∫—â–æ —î –∑–∞—Ç—Ä–∏–º–∫–∏/—Å–∫–∞—Å—É–≤–∞–Ω–Ω—è:

```
üì¢ –©–æ–¥–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç –ø—Ä–æ —Ä—É—Ö –ø–æ—ó–∑–¥—ñ–≤

üìç –°—Ç–∞–Ω—Ü—ñ—è: Ely
üïê –ß–∞—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏: 07:00, 29.12.2025

üìä –í–∏—è–≤–ª–µ–Ω–æ –∑–º—ñ–Ω: 3
  ‚è±Ô∏è –ó–∞—Ç—Ä–∏–º–∫–∏: 2
  ‚ùå –°–∫–∞—Å—É–≤–∞–Ω–Ω—è: 1

========================================

1. DELAY
‚Üí London Kings Cross
üïê 07:15
Platform 2
‚è±Ô∏è –ó–∞—Ç—Ä–∏–º–∫–∞: 10 —Ö–≤

----------------------------------------

2. CANCELLATION
‚Üí Cambridge
üïê 07:45
‚ùå –°–∫–∞—Å–æ–≤–∞–Ω–æ
üí¨ Engineering works

----------------------------------------

3. DELAY
‚Üí Norwich
üïê 08:20
Platform 1
‚è±Ô∏è –ó–∞—Ç—Ä–∏–º–∫–∞: 5 —Ö–≤

ü§ñ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ UK Train Monitor
```

### –Ø–∫—â–æ –≤—Å–µ –ø–æ —Ä–æ–∑–∫–ª–∞–¥—É:

```
‚úÖ –©–æ–¥–µ–Ω–Ω–∏–π –∑–≤—ñ—Ç –ø—Ä–æ —Ä—É—Ö –ø–æ—ó–∑–¥—ñ–≤

üìç –°—Ç–∞–Ω—Ü—ñ—è: Ely
üïê –ß–∞—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏: 07:00, 29.12.2025

‚úÖ –ë–µ–∑ –∑–º—ñ–Ω

–í—Å—ñ –ø–æ—ó–∑–¥–∏ –π–¥—É—Ç—å –∑–∞ —Ä–æ–∑–∫–ª–∞–¥–æ–º. –ó–∞—Ç—Ä–∏–º–æ–∫ —Ç–∞ —Å–∫–∞—Å—É–≤–∞–Ω—å –Ω–µ –≤–∏—è–≤–ª–µ–Ω–æ.
```

---

## –ö–æ–º–∞–Ω–¥–∏

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –†—É—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä—è–º–æ –∑–∞—Ä–∞–∑ (–±–µ–∑ Telegram)
docker compose exec bot python -m src.train_monitor.daily_monitor --check-now --dry-run

# –†—É—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é –≤ Telegram
docker compose exec bot python -m src.train_monitor.daily_monitor --check-now

# –ó–º—ñ–Ω–∏—Ç–∏ —á–∞—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ (—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
docker compose exec bot python -m src.train_monitor.daily_monitor --time 14:30 --dry-run
```

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å–æ–º

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —â–æ–¥–µ–Ω–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
docker compose up -d train-monitor

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ (–ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ .env)
docker compose restart train-monitor

# –ó—É–ø–∏–Ω–∏—Ç–∏
docker compose stop train-monitor

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏
docker compose logs -f train-monitor

# –û—Å—Ç–∞–Ω–Ω—ñ 50 —Ä—è–¥–∫—ñ–≤ –ª–æ–≥—ñ–≤
docker compose logs --tail=50 train-monitor

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—É
docker compose ps train-monitor
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–∞—Å—É

```bash
# –ó–º—ñ–Ω–∏—Ç–∏ —á–∞—Å –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤ docker-compose.yml:
command: python -m src.train_monitor.daily_monitor --time 06:30

# –ê–±–æ —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤ .env:
TRAIN_MONITOR_CHECK_TIME=06:30

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏
docker compose restart train-monitor
```

---

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω—Ü—ñ–π

### –î–æ–¥–∞—Ç–∏ —Å—Ç–∞–Ω—Ü—ñ—é Cambridge

–£ —Ñ–∞–π–ª—ñ `.env`:

```bash
# –î–æ–¥–∞—Ç–∏ CBG –¥–æ —Å–ø–∏—Å–∫—É
TRAIN_MONITOR_STATIONS=ELY,CBG

# –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Cambridge (–≤–∂–µ —î –≤ .env.example)
TRAIN_MONITOR_CBG_ENABLED=true
TRAIN_MONITOR_CBG_NAME=Cambridge
TRAIN_MONITOR_CBG_MODE=departures
TRAIN_MONITOR_CBG_INTERVAL=10  # –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ daily —Ä–µ–∂–∏–º—ñ
TRAIN_MONITOR_CBG_TIME_WINDOW=120
TRAIN_MONITOR_CBG_MAX_SERVICES=50
TRAIN_MONITOR_CBG_CHAT_ID=-1001234567890  # –í–∞—à chat ID
TRAIN_MONITOR_CBG_NOTIFICATIONS=true
TRAIN_MONITOR_CBG_MIN_DELAY=10
TRAIN_MONITOR_CBG_NOTIFY_CANCELLATIONS=true
TRAIN_MONITOR_CBG_NOTIFY_PLATFORM_CHANGES=true
TRAIN_MONITOR_CBG_DESTINATIONS=KGX  # –¢—ñ–ª—å–∫–∏ –ø–æ—ó–∑–¥–∏ –¥–æ Kings Cross
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏:
```bash
docker compose restart train-monitor
```

---

## –í–∞–∂–ª–∏–≤—ñ –º–æ–º–µ–Ω—Ç–∏

### ‚è∞ –ß–∞—Å–æ–≤–∞ –∑–æ–Ω–∞

–°–µ—Ä–≤—ñ—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **UK timezone (Europe/London)** –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫ –æ 7:00 —Ä–∞–Ω–∫—É –∑–∞ –±—Ä–∏—Ç–∞–Ω—Å—å–∫–∏–º —á–∞—Å–æ–º.

### üîë Chat ID –¥–ª—è Telegram

–©–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ chat ID –≤–∞—à–æ—ó –≥—Ä—É–ø–∏:

1. –î–æ–¥–∞–π—Ç–µ –±–æ—Ç–∞ –¥–æ –≥—Ä—É–ø–∏
2. –ù–∞–¥—ñ—à–ª—ñ—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –≥—Ä—É–ø—É
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
```
4. –ó–Ω–∞–π–¥—ñ—Ç—å `"chat":{"id":-1001234567890,...}`
5. –°–∫–æ–ø—ñ—é–π—Ç–µ ID (–∑ –º—ñ–Ω—É—Å–æ–º!)

### üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –º–æ–≤–∞

–í—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å—Å—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é, –æ–∫—Ä—ñ–º:
- –ù–∞–∑–≤ —Å—Ç–∞–Ω—Ü—ñ–π (Ely, Cambridge, London Kings Cross)
- –ù–∞–∑–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ (Greater Anglia, etc.)
- –¢–µ—Ö–Ω—ñ—á–Ω–∏—Ö —Ç–µ—Ä–º—ñ–Ω—ñ–≤ (Service ID)

### üìä –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ñ—ñ–ª—å—Ç—Ä—É—î –∑–º—ñ–Ω–∏ –∑–≥—ñ–¥–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å:
- `MIN_DELAY` - –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- `NOTIFY_CANCELLATIONS` - –ø–æ–≤—ñ–¥–æ–º–ª—è—Ç–∏ –ø—Ä–æ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è
- `NOTIFY_PLATFORM_CHANGES` - –ø–æ–≤—ñ–¥–æ–º–ª—è—Ç–∏ –ø—Ä–æ –∑–º—ñ–Ω—É –ø–ª–∞—Ç—Ñ–æ—Ä–º
- `DESTINATIONS` - —Ñ—ñ–ª—å—Ç—Ä –ø–æ —Å—Ç–∞–Ω—Ü—ñ—è–º –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è

---

## Troubleshooting

### –°–µ—Ä–≤—ñ—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
docker compose logs train-monitor

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
grep TRAIN_MONITOR .env

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Darwin API
docker compose exec bot python -c "from src.utils.config import get_settings; print(get_settings().darwin_api_key)"
```

### –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –Ω–∞–¥—Ö–æ–¥—è—Ç—å

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:**
1. `TRAIN_MONITOR_DRY_RUN=false` (–Ω–µ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ)
2. `TRAIN_MONITOR_ELY_CHAT_ID` –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
3. `TRAIN_MONITOR_ELY_NOTIFICATIONS=true`
4. –ë–æ—Ç –¥–æ–¥–∞–Ω–∏–π –¥–æ –≥—Ä—É–ø–∏
5. –ë–æ—Ç –º–∞—î –ø—Ä–∞–≤–∞ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

**–¢–µ—Å—Ç:**
```bash
# –†—É—á–Ω–∏–π —Ç–µ—Å—Ç –∑ –ª–æ–≥–∞–º–∏
docker compose exec bot python -m src.train_monitor.daily_monitor --check-now
```

### API –ø–æ–º–∏–ª–∫–∏

–Ø–∫—â–æ –±–∞—á–∏—Ç–µ –ø–æ–º–∏–ª–∫–∏ –∑ Darwin API:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å API
curl https://lite.realtime.nationalrail.co.uk/OpenLDBWS/wsdl.aspx

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–ª—é—á (–º–æ–∂–µ —â–µ –Ω–µ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–π)
# –ó–∞—á–µ–∫–∞–π—Ç–µ 10 —Ö–≤–∏–ª–∏–Ω –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–ª—é—á–∞

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
docker compose exec bot python -c "
from src.train_monitor.darwin_client import DarwinClient
import asyncio
client = DarwinClient()
print(f'API Key: {client.api_key[:10]}...')
print(f'Library: {client.library}')
"
```

---

## –ü—Ä–æ–¥–∞–∫—à–Ω —á–µ–∫–ª–∏—Å—Ç

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–Ω:

- [ ] Darwin API –∫–ª—é—á –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ç–∞ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∏–π
- [ ] `.env` –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π:
  - [ ] `TRAIN_MONITOR_ENABLED=true`
  - [ ] `TRAIN_MONITOR_DRY_RUN=false`
  - [ ] `DARWIN_API_KEY=<–≤–∞—à_–∫–ª—é—á>`
  - [ ] `TRAIN_MONITOR_ELY_CHAT_ID=<—Å–ø—Ä–∞–≤–∂–Ω—ñ–π_chat_id>`
- [ ] –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–π–¥–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ:
  - [ ] `--check-now --dry-run` –ø—Ä–∞—Ü—é—î
  - [ ] –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–µ–∫—Ç–Ω–æ —Ñ–æ—Ä–º–∞—Ç—É—é—Ç—å—Å—è
  - [ ] –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –º–æ–≤–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è
- [ ] Telegram –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π:
  - [ ] –ë–æ—Ç –¥–æ–¥–∞–Ω–∏–π –¥–æ –≥—Ä—É–ø–∏
  - [ ] Chat ID –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
  - [ ] –¢–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –æ—Ç—Ä–∏–º–∞–Ω–æ
- [ ] –°–µ—Ä–≤—ñ—Å –∑–∞–ø—É—â–µ–Ω–∏–π:
  - [ ] `docker compose up -d train-monitor`
  - [ ] –õ–æ–≥–∏ –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
  - [ ] Health check –ø—Ä–æ—Ö–æ–¥–∏—Ç—å

---

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –ø—Ä—è–º–æ –∑–∞—Ä–∞–∑:**
```bash
docker compose exec bot python -m src.train_monitor.daily_monitor --check-now --dry-run
```

2. **–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ª–æ–≥–∏** —Ç–∞ –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –≤–∏–≥–ª—è–¥–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ

3. **–û—Ç—Ä–∏–º–∞–π—Ç–µ chat ID** –≤–∞—à–æ—ó Telegram –≥—Ä—É–ø–∏

4. **–û–Ω–æ–≤—ñ—Ç—å `.env`** –∑ —Ä–µ–∞–ª—å–Ω–∏–º chat ID:
```bash
nano .env
# –ó–º—ñ–Ω—ñ—Ç—å:
TRAIN_MONITOR_ELY_CHAT_ID=–≤–∞—à_chat_id
TRAIN_MONITOR_DRY_RUN=false
```

5. **–ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤—ñ—Å:**
```bash
docker compose restart train-monitor
```

6. **–ß–µ–∫–∞–π—Ç–µ –ø–µ—Ä—à–æ–≥–æ –∑–≤—ñ—Ç—É –æ 7:00 —Ä–∞–Ω–∫—É –∑–∞–≤—Ç—Ä–∞** –∞–±–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å `--check-now` –¥–ª—è –Ω–µ–≥–∞–π–Ω–æ–≥–æ —Ç–µ—Å—Ç—É

---

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ —â–æ—Å—å –Ω–µ –ø—Ä–∞—Ü—é—î:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `docker compose logs -f train-monitor`
2. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ `.env` –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å `--check-now --dry-run` –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 2025-12-28
